# =============================================================================
# Tá na Mão - Configuração de Ambiente
# =============================================================================
# Copie este arquivo para .env e preencha com suas configurações

# -----------------------------------------------------------------------------
# Aplicação
# -----------------------------------------------------------------------------
APP_NAME="Tá na Mão API"
APP_VERSION="0.1.0"
ENVIRONMENT=development  # development, staging, production
DEBUG=true

# -----------------------------------------------------------------------------
# Banco de Dados
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://tanamao:tanamao_dev_2024@localhost:5432/tanamao

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
CORS_ORIGINS=["http://localhost:3000", "http://localhost:3001", "http://localhost:5173"]

# -----------------------------------------------------------------------------
# APIs Externas - IBGE
# -----------------------------------------------------------------------------
IBGE_API_BASE_URL=https://servicodados.ibge.gov.br/api/v3
IBGE_LOCALIDADES_URL=https://servicodados.ibge.gov.br/api/v1/localidades

# -----------------------------------------------------------------------------
# Cache TTLs (segundos)
# -----------------------------------------------------------------------------
CACHE_TTL_GEOJSON=86400     # 24 horas
CACHE_TTL_AGGREGATIONS=3600  # 1 hora
CACHE_TTL_MUNICIPALITIES=1800 # 30 minutos

# -----------------------------------------------------------------------------
# Google AI (Gemini)
# -----------------------------------------------------------------------------
GOOGLE_API_KEY=sua_chave_aqui
AGENT_MODEL=gemini-2.0-flash-exp

# -----------------------------------------------------------------------------
# Twilio (WhatsApp, SMS, Voice)
# -----------------------------------------------------------------------------
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=seu_auth_token_aqui

# WhatsApp
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886  # Número sandbox Twilio
TWILIO_WEBHOOK_URL=https://seu-dominio.com/api/v1/webhook/whatsapp

# SMS
TWILIO_SMS_FROM=+5511999999999  # Seu número Twilio para SMS
# ou número curto (short code) quando disponível

# Voice (0800)
TWILIO_VOICE_FROM=+5508001234567  # Seu número 0800/Twilio para voz

# -----------------------------------------------------------------------------
# Zenvia (Alternativa para SMS)
# -----------------------------------------------------------------------------
# Descomente se usar Zenvia em vez de Twilio para SMS
# SMS_PROVIDER=zenvia
# ZENVIA_API_TOKEN=seu_token_zenvia
# ZENVIA_SMS_FROM=28282  # Número curto

# -----------------------------------------------------------------------------
# Voice/TTS Configurações
# -----------------------------------------------------------------------------
VOICE_LANGUAGE=pt-BR
VOICE_VOICE=Polly.Camila  # Amazon Polly voice

# -----------------------------------------------------------------------------
# Webhook URLs (para configurar nos provedores)
# -----------------------------------------------------------------------------
WEBHOOK_BASE_URL=https://api.tanamao.gov.br

# SMS Webhooks
# - Twilio: Configure no console Twilio para apontar para:
#   POST {WEBHOOK_BASE_URL}/api/v1/sms/webhook/twilio
#   POST {WEBHOOK_BASE_URL}/api/v1/sms/webhook/twilio/status

# Voice Webhooks
# - Twilio: Configure no console Twilio para apontar para:
#   POST {WEBHOOK_BASE_URL}/api/v1/voice/webhook
#   POST {WEBHOOK_BASE_URL}/api/v1/voice/status
#   Fallback: {WEBHOOK_BASE_URL}/api/v1/voice/fallback

# WhatsApp Webhook
# - Twilio: Configure no console Twilio para apontar para:
#   POST {WEBHOOK_BASE_URL}/api/v1/webhook/whatsapp

# -----------------------------------------------------------------------------
# Métricas e Monitoramento
# -----------------------------------------------------------------------------
# PROMETHEUS_ENABLED=true
# SENTRY_DSN=https://xxx@sentry.io/xxx

# -----------------------------------------------------------------------------
# Segurança (Produção)
# -----------------------------------------------------------------------------
# SECRET_KEY=sua_chave_secreta_muito_longa
# API_RATE_LIMIT=100  # requests por minuto

# -----------------------------------------------------------------------------
# Logs
# -----------------------------------------------------------------------------
# LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
# LOG_FORMAT=json  # json, text

# =============================================================================
# MCP - Model Context Protocol
# =============================================================================
# Configuracao de servidores MCP para integracao com ferramentas externas
# Ver docs/MCP_SETUP.md para detalhes

# -----------------------------------------------------------------------------
# Google Maps MCP
# -----------------------------------------------------------------------------
# API key do Google Cloud Platform com Maps API habilitada
GOOGLE_MAPS_API_KEY=sua_chave_google_maps_aqui

# -----------------------------------------------------------------------------
# Twilio MCP (API Key alternativa)
# -----------------------------------------------------------------------------
# Se usar MCP em vez de integracao direta, configure API Key
# TWILIO_API_KEY=SKxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# TWILIO_API_SECRET=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# -----------------------------------------------------------------------------
# ChromaDB (RAG)
# -----------------------------------------------------------------------------
# Diretorio para persistir vetores do ChromaDB
CHROMA_PERSIST_DIRECTORY=./data/chroma

# -----------------------------------------------------------------------------
# MCP Configuration
# -----------------------------------------------------------------------------
# Habilitar/desabilitar MCPs (fallback para APIs diretas se false)
MCP_ENABLED=true

# Caminho para arquivo de configuracao MCP (relativo ao diretorio do projeto)
MCP_CONFIG_PATH=.mcp.json

# Timeout para chamadas MCP (em ms)
MCP_TIMEOUT=30000

# -----------------------------------------------------------------------------
# MCP Debug
# -----------------------------------------------------------------------------
# Habilitar logs detalhados de MCPs
MCP_DEBUG=false
MCP_LOG_LEVEL=info

# =============================================================================
# Integracao Gov.br e APIs Publicas
# =============================================================================

# -----------------------------------------------------------------------------
# Gov.br Login SSO (gratuito, disponivel para qualquer aplicacao)
# -----------------------------------------------------------------------------
# Solicite em: https://acesso.gov.br/roteiro-tecnico
GOVBR_CLIENT_ID=seu_client_id_govbr
GOVBR_CLIENT_SECRET=seu_client_secret_govbr
GOVBR_REDIRECT_URI=https://api.tanamao.com.br/api/v1/auth/callback

# -----------------------------------------------------------------------------
# Portal da Transparencia (gratuito, dados publicos)
# -----------------------------------------------------------------------------
# Cadastre-se em: https://portaldatransparencia.gov.br/api-de-dados
# Rate limits: 90 req/min (06h-24h), 300 req/min (00h-06h)
TRANSPARENCIA_API_KEY=sua_chave_portal_transparencia

# -----------------------------------------------------------------------------
# SERPRO Consulta CPF (pago, ~R$ 0,66/consulta)
# -----------------------------------------------------------------------------
# Contrate em: https://loja.serpro.gov.br/pin
# Requer: CNPJ ativo + e-CNPJ ou formulario manual
SERPRO_CONSUMER_KEY=sua_consumer_key_serpro
SERPRO_CONSUMER_SECRET=sua_consumer_secret_serpro
SERPRO_ENABLED=false  # Mude para true apos contratar

# -----------------------------------------------------------------------------
# IMPORTANTE: APIs NAO disponiveis para startups
# -----------------------------------------------------------------------------
# Conecta Gov.br (CadUnico tempo real, CPF Light) - RESTRITO
# Acesso apenas para orgaos da administracao publica federal
# Para acessar, necessario parceria B2G (ex: convenio com prefeitura)
#
# CONECTA_GOVBR_URL=https://api.conectagov.estaleiro.serpro.gov.br
# CONECTA_GOVBR_CLIENT_ID=
# CONECTA_GOVBR_CLIENT_SECRET=
